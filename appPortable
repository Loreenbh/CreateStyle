ğŸ§± 1. Installer les outils et dÃ©pendances

Tu vas compiler SFML depuis les sources.
âœ… Commandes Ã  lancer :

sudo apt update
sudo apt install git cmake build-essential \
libx11-dev libxcursor-dev libxrandr-dev libgl1-mesa-dev \
libudev-dev libopenal-dev libflac-dev libvorbis-dev \
libfreetype6-dev libjpeg-dev


ğŸ“¥ 2. TÃ©lÃ©charger et compiler SFML en statique
âœ… Ã‰tapes :

git clone https://github.com/SFML/SFML.git
cd SFML
mkdir build && cd build

cmake .. \
  -DCMAKE_BUILD_TYPE=Release \
  -DBUILD_SHARED_LIBS=OFF \
  -DSFML_USE_STATIC_STD_LIBS=ON

make -j$(nproc)

â¡ï¸ Les fichiers .a (libs statiques) seront dans SFML/build/lib.




ğŸ“ 3. PrÃ©parer ton projet

Imaginons une structure simple :

MonJeu/
â”œâ”€â”€ main.cpp
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ assets/
â””â”€â”€ SFML/       <-- les sources SFML clonÃ©es avec dossier `build/`


ğŸ“„ 4. Ã‰crire ton CMakeLists.txt

Voici un exemple complet et commentÃ© :

cmake_minimum_required(VERSION 3.16)
project(MonJeu)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_BUILD_TYPE Release)

# ğŸ“ Dossier oÃ¹ SFML a Ã©tÃ© compilÃ©
set(SFML_STATIC_LIBRARIES TRUE)
set(SFML_DIR "${CMAKE_SOURCE_DIR}/SFML/build")

# ğŸ” Trouver SFML compilÃ©e statiquement
find_package(SFML 2.5 COMPONENTS graphics window system audio REQUIRED)

# ğŸ”¨ Ton exÃ©cutable
add_executable(MonJeu main.cpp)

# ğŸ”— Lien avec SFML statique
target_link_libraries(MonJeu
    sfml-graphics
    sfml-window
    sfml-system
    sfml-audio
)


âš™ï¸ 5. Compiler ton projet

mkdir build && cd build
cmake ..
make -j$(nproc)

â¡ï¸ Tu obtiens MonJeu (exÃ©cutable compilÃ© statiquement) dans build/.


ğŸ” 6. VÃ©rifier les dÃ©pendances restantes

ldd MonJeu

â¡ï¸ Tu devrais encore voir des dÃ©pendances vers :

    libstdc++.so

    libc.so

    libGL.so

    libX11.so

    etc.

On va les copier avec ton exÃ©cutable pour que Ã§a tourne ailleurs.
ğŸ“¦ 7. CrÃ©er un dossier portable

mkdir -p MonJeuPortable/lib
cp ./MonJeu MonJeuPortable/
cd MonJeuPortable

Copier les libs nÃ©cessaires automatiquement :

ldd MonJeu | grep "=>" | awk '{print $3}' | xargs -I '{}' cp -v '{}' ./lib/

â¡ï¸ Ã‡a met toutes les libs dynamiques dans lib/
ğŸš€ 8. Ajouter un script de lancement

CrÃ©e un fichier launch.sh dans MonJeuPortable/ :

#!/bin/bash
DIR="$(dirname "$(readlink -f "$0")")"
export LD_LIBRARY_PATH="$DIR/lib"
exec "$DIR/MonJeu"

chmod +x launch.sh

ğŸ§¼ 9. Finaliser ton dossier portable

Structure finale :

MonJeuPortable/
â”œâ”€â”€ MonJeu         âœ… binaire
â”œâ”€â”€ lib/           âœ… dÃ©pendances .so
â”œâ”€â”€ launch.sh      âœ… script de lancement
â””â”€â”€ assets/        âœ… images, sons, etc. (si ton jeu en a besoin)

â¡ï¸ Tu peux maintenant zipper ce dossier, lâ€™envoyer Ã  un pote, et il pourra lancer ton jeu avec :

./launch.sh

Sans rien installer dâ€™autre ğŸ‰

*******************************************************************************************
Ã‰tape	MÃ©taphore	Ce que tu fais
apt install	Remplir ton garage dâ€™outils et matÃ©riaux	Tu installes les bibliothÃ¨ques nÃ©cessaires pour construire SFML
git clone SFML	RÃ©cupÃ©rer les plans du moteur	Tu tÃ©lÃ©charges le code source de SFML
cmake && make	Fabriquer le moteur toi-mÃªme	Tu compiles SFML en statique pour quâ€™il marche sans rien autour
Ton jeu + SFML statique	Voiture avec moteur intÃ©grÃ©	Tu construis une app portable, prÃªte Ã  rouler partout ğŸš—ğŸ’¨






Ã‰tape par Ã©tape : oÃ¹ et comment faire chaque action ?
1ï¸âƒ£ Cloner SFML dans un dossier Ã  part (par exemple dans ton dossier SFML/)

Tu vas d'abord crÃ©er un dossier oÃ¹ tu vas rÃ©cupÃ©rer le code source de SFML.

cd ~
git clone https://github.com/SFML/SFML.git
cd SFML
mkdir build
cd build

Ici :

    git clone rÃ©cupÃ¨re toute la bibliothÃ¨que SFML dans le dossier SFML/ dans ton rÃ©pertoire personnel (ou n'importe oÃ¹ ailleurs sur ta machine, mais l'idÃ©e est d'avoir SFML dans un dossier sÃ©parÃ©).

    Ensuite, tu crÃ©es un sous-dossier build/ oÃ¹ tu vas faire la compilation.

2ï¸âƒ£ Compiler SFML en version statique dans ce dossier

Une fois que tu es dans SFML/build, tu utilises cmake et make pour compiler SFML en version statique (comme vu dans les Ã©tapes prÃ©cÃ©dentes).

cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF -DSFML_USE_STATIC_STD_LIBS=ON
make -j$(nproc)

â¡ï¸ Le moteur SFML est maintenant compilÃ© et prÃªt Ã  Ãªtre utilisÃ©, et les fichiers .a seront dans SFML/build/lib/ (les bibliothÃ¨ques statiques).
3ï¸âƒ£ Aller dans ton rÃ©pertoire monJeu/ (ton jeu)

Ton jeu et SFML sont dans des dossiers sÃ©parÃ©s, donc maintenant, tu vas dans le rÃ©pertoire oÃ¹ tu dÃ©veloppes ton jeu :

cd ~/monJeu

Si ce rÃ©pertoire n'existe pas encore, crÃ©e-le d'abord avec mkdir monJeu.
4ï¸âƒ£ Lier SFML Ã  ton projet monJeu via CMakeLists.txt

Dans ton projet de jeu, tu vas maintenant lier les bibliothÃ¨ques SFML Ã  ton jeu dans ton fichier CMakeLists.txt pour dire au compilateur oÃ¹ trouver SFML.

Exemple de contenu de ton CMakeLists.txt dans monJeu/ :

cmake_minimum_required(VERSION 3.10)
project(MonJeu)

# Indiquer oÃ¹ SFML a Ã©tÃ© compilÃ©
set(SFML_DIR ~/SFML/build/lib/cmake/SFML)

# Trouver SFML
find_package(SFML 2.5 COMPONENTS graphics window system audio REQUIRED)

# CrÃ©er l'exÃ©cutable de ton jeu
add_executable(MonJeu main.cpp)

# Lier SFML Ã  ton projet de jeu
target_link_libraries(MonJeu sfml-graphics sfml-window sfml-system sfml-audio)

Ici :

    Tu dis oÃ¹ SFML se trouve via SFML_DIR.

    Tu lances find_package pour dire Ã  CMake dâ€™utiliser la SFML compilÃ©e dans ton projet.

En rÃ©sumÃ© :

    Cloner SFML dans un dossier sÃ©parÃ© (~/SFML).

    Compiler SFML en version statique dans ~/SFML/build/.

    Dans ton projet de jeu (monJeu), tu lieras SFML Ã  ton jeu via le fichier CMakeLists.txt.

ğŸ”‘ Important : SFML et ton jeu sont dans des dossiers distincts. Le but est de garder les choses sÃ©parÃ©es pour mieux organiser ton projet.

